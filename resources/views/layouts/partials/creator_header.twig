{% set headerClasses = headerClasses|default('creator-header') %}
{% if 'site-header' not in headerClasses %}
    {% set headerClasses = 'site-header ' ~ headerClasses %}
{% endif %}
{% set logoHref = logoHref|default('/') %}
{% set logoLabel = logoLabel|default('Msss') %}
{% set logoSubLabel = logoSubLabel|default('Espace créatrice') %}
{% set logoImage = logoImage is defined ? logoImage : '/assets/img/logo.png' %}
{% if profileActive is not defined %}
    {% set profileActive = is_active_path('/profile') and not (is_active_path('/profile/messages') or is_active_path('/profile/packs')) %}
{% endif %}
{% set defaultNavLinks = [
    {'label': 'Profil', 'href': '/profile', 'match': '/profile', 'icon': 'fas fa-user', 'isActive': profileActive},
    {'label': 'Dashboard', 'href': '/dashboard', 'match': '/dashboard', 'icon': 'fas fa-gauge-high'},
    {'label': 'Packs', 'href': '/profile/packs', 'match': '/profile/packs', 'icon': 'fas fa-box'},
    {'label': 'Messages', 'href': '/profile/messages', 'match': '/profile/messages', 'icon': 'fas fa-envelope'}
] %}
{% set navLinks = navLinks|default(defaultNavLinks) %}
{% set computedNavLinks = [] %}
{% for link in navLinks %}
    {% set href = link.href|default('#') %}
    {% set match = link.match|default(href) %}
    {% set linkIsActive = link.isActive is defined ? link.isActive : is_active_path(match) %}
    {% set computedNavLinks = computedNavLinks|merge([link|merge({'href': href, 'match': match, 'isActive': linkIsActive})]) %}
{% endfor %}
{% set defaultActionButtons = [
    {'label': 'Déconnexion', 'href': '/logout', 'icon': 'fas fa-sign-out-alt', 'variant': 'primary'}
] %}
{% set actionButtons = actionButtons|default(defaultActionButtons) %}
<header class="{{ headerClasses|trim }}">
    <div class="site-header__inner">
        <a href="{{ logoHref }}" class="site-logo">
            {% if logoImage %}
                <img src="{{ logoImage }}" alt="{{ logoLabel }}">
            {% endif %}
            <span>
                {{ logoLabel }}
                {% if logoSubLabel %}
                    <small>{{ logoSubLabel }}</small>
                {% endif %}
            </span>
        </a>

        <nav id="creator-nav" class="site-nav">
            <ul class="site-nav__list">
                {% for link in computedNavLinks %}
                    <li>
                        <a href="{{ link.href }}"
                           class="site-nav__link {{ link.isActive ? 'is-active' }}">
                            {% if link.icon %}
                                <i class="{{ link.icon }}"></i>
                            {% endif %}
                            {{ link.label }}
                        </a>
                    </li>
                {% endfor %}
            </ul>
        </nav>

        {% if actionButtons is not empty %}
            <div class="site-actions">
                {% for button in actionButtons %}
                    {% set variant = button.variant|default('ghost') %}
                    {% set buttonClass = variant == 'primary' ? 'btn' : 'btn-ghost' %}
                    <a class="{{ buttonClass }}"
                       href="{{ button.href }}"
                       {% if button.target is defined %}target="{{ button.target }}"{% endif %}>
                        {% if button.icon %}
                            <i class="{{ button.icon }}"></i>
                        {% endif %}
                        {{ button.label }}
                    </a>
                {% endfor %}
            </div>
        {% endif %}
    </div>
</header>
