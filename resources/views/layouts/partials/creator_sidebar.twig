{% set sidebarLinks = [
    {'href': '/dashboard', 'match': '/dashboard', 'label': 'Tableau de bord', 'icon': 'fas fa-chart-line', 'exact': true},
    {'href': '/dashboard/donators', 'match': '/dashboard/donators', 'label': 'Donateurs', 'icon': 'fas fa-users'},
    {'href': '/dashboard/donations', 'match': '/dashboard/donations', 'label': 'Dons', 'icon': 'fas fa-hand-holding-heart'},
    {'href': '/profile/packs', 'match': '/profile/packs', 'label': 'Mes Packs', 'icon': 'fas fa-box-open'},
    {'href': '/dashboard/links', 'match': '/dashboard/links', 'label': 'Mes liens', 'icon': 'fas fa-link'},
    {'href': '/dashboard/ai-tools', 'match': '/dashboard/ai-tools', 'label': 'Outils IA', 'icon': 'fas fa-wand-magic-sparkles'},
] %}

<aside id="creator-sidebar" class="fixed inset-y-0 left-0 z-20 w-64 bg-white border-r border-secondary-200 transform -translate-x-full lg:translate-x-0 transition-transform duration-300 ease-in-out pt-16 lg:pt-0">
    <div class="h-full flex flex-col pt-[50px] pb-4 overflow-y-auto">
        {# Navigation Links #}
        <nav class="mt-[100px] px-3 space-y-1 flex-1">
            {% for link in sidebarLinks %}
                {% set isActive = link.exact is defined and link.exact ? is_active_path(link.match, true) : is_active_path(link.match) %}
                
                <a href="{{ link.href }}" class="group flex items-center px-3 py-2.5 text-sm font-medium rounded-lg transition-colors {{ isActive ? 'bg-primary-50 text-primary-700' : 'text-secondary-600 hover:bg-secondary-50 hover:text-secondary-900' }}">
                    <i class="{{ link.icon }} w-6 text-center text-lg {{ isActive ? 'text-primary-600' : 'text-secondary-400 group-hover:text-secondary-500' }} mr-3"></i>
                    {{ link.label }}
                </a>
            {% endfor %}

             <div class="my-4 border-t border-secondary-100"></div>

             <a href="/dashboard/settings" class="group flex items-center px-3 py-2.5 text-sm font-medium rounded-lg transition-colors {{ is_active_path('/dashboard/settings') ? 'bg-primary-50 text-primary-700' : 'text-secondary-600 hover:bg-secondary-50 hover:text-secondary-900' }}">
                <i class="fas fa-cog w-6 text-center text-lg text-secondary-400 group-hover:text-secondary-500 mr-3"></i>
                Paramètres
            </a>
        </nav>

        {# Sidebar Footer #}
        <div class="p-4 border-t border-secondary-200">
            <a href="/logout" class="flex items-center w-full px-3 py-2 text-sm font-medium text-red-600 rounded-lg hover:bg-red-50 transition-colors">
                <i class="fas fa-sign-out-alt w-6 text-center text-lg mr-3"></i>
                Déconnexion
            </a>
        </div>
    </div>
</aside>

{# Mobile Overlay #}
<div id="sidebar-overlay" class="fixed inset-0 bg-secondary-900 bg-opacity-50 z-10 hidden lg:hidden backdrop-blur-sm transition-opacity" onclick="toggleSidebar()"></div>

<script>
    const sidebar = document.getElementById('creator-sidebar');
    const overlay = document.getElementById('sidebar-overlay');
    const trigger = document.getElementById('mobile-menu-trigger');

    function toggleSidebar() {
        sidebar.classList.toggle('-translate-x-full');
        overlay.classList.toggle('hidden');
    }

    if (trigger) {
        trigger.addEventListener('click', toggleSidebar);
    }
</script>


