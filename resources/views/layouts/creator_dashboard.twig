{% extends 'layouts/base.twig' %}

{% block title %}{{ pageTitle|default('Dashboard Créateur') }}{% endblock %}

{% block head_assets %}
    <link rel="icon" type="image/png" href="/assets/img/favicon.png">
    <link rel="stylesheet" href="{{ asset('build/app.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" referrerpolicy="no-referrer" />
{% endblock %}

{% block body_class %}bg-white font-sans h-full overflow-hidden{% endblock %}

{% block body %}
    <div class="min-h-screen flex flex-col">
        {% include 'layouts/partials/creator_header.twig' %}

        <div class="flex flex-1 pt-12 lg:pt-0"> {# Added padding top for mobile header #}
            {% include 'layouts/partials/creator_sidebar.twig' %}

            <main class="flex-1 lg:pl-64 overflow-y-auto h-[calc(100vh-4rem)] p-4 sm:p-6 lg:p-8">
                 <div class="max-w-7xl mx-auto">
                    {% if pageTitle is defined and pageTitle %}
                        <div class="mb-6">
                            <h1 class="text-2xl font-heading font-bold text-secondary-900">{{ pageTitle }}</h1>
                        </div>
                    {% endif %}

                    {% if dailyTip is defined and dailyTip %}
                        <div class="mb-6 bg-accent-50 border border-accent-200 rounded-lg p-4 flex items-start gap-3">
                            <i class="fas fa-lightbulb text-accent-500 mt-0.5"></i>
                            <div>
                                <span class="font-bold text-accent-800 text-sm block mb-1">Conseil du jour</span>
                                <p class="text-sm text-accent-700">{{ dailyTip }}</p>
                            </div>
                        </div>
                    {% endif %}

                    {% for message in flash_messages() %}
                         <div class="mb-6 p-4 rounded-lg flex items-center gap-3
                            {% if message.type == 'error' %}bg-red-50 text-red-700 border border-red-100
                            {% elseif message.type == 'success' %}bg-green-50 text-green-700 border border-green-100
                            {% else %}bg-blue-50 text-blue-700 border border-blue-100{% endif %}">
                            
                            {% if message.type == 'error' %}
                                <i class="fas fa-exclamation-circle shrink-0"></i>
                            {% elseif message.type == 'success' %}
                                <i class="fas fa-check-circle shrink-0"></i>
                            {% else %}
                                <i class="fas fa-info-circle shrink-0"></i>
                            {% endif %}
                            
                             <span class="text-sm font-medium">{{ message.message|default('Message indéfini') }}</span>
                        </div>
                    {% endfor %}

                    {% block content %}{% endblock %}
                </div>
            </main>
        </div>
    </div>
{% endblock %}

{% block scripts %}
    <script>
       // Global Dashboard Scripts can go here
    </script>
    {% if scripts is defined %}
        {% for script in scripts %}
            <script src="{{ script }}"></script>
        {% endfor %}
    {% endif %}
{% endblock %}


