{% extends 'layouts/base.twig' %}

{% block title %}{{ pageTitle|default('Dashboard Créateur') }}{% endblock %}

{% block head_assets %}
    <link rel="icon" type="image/png" href="/assets/img/favicon.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <link rel="stylesheet" href="{{ asset('css/common.css') }}">
    <link rel="stylesheet" href="{{ asset('css/dashboard.css') }}">
    <link rel="stylesheet" href="{{ asset('css/creator-dashboard.css') }}">
    <link rel="stylesheet" href="/assets/build/app2.css">
{% endblock %}

{% block body_class %}site-shell creator-dashboard{% endblock %}

{% block body %}
    {% include 'layouts/partials/creator_header.twig' %}

    <div id="main-wrapper">
        {% include 'layouts/partials/creator_sidebar.twig' %}

        <main class="creator-content">
            {% if pageTitle is defined and pageTitle %}
                <h1 class="dashboard-title">{{ pageTitle }}</h1>
            {% endif %}

            {% if dailyTip is defined and dailyTip %}
                <div class="dashboard-tip">
                    <i class="bi bi-lightbulb-fill"></i>
                    <strong>Conseil du jour :</strong> {{ dailyTip }}
                </div>
            {% endif %}

            {% for message in flash_messages() %}
                <div class="flash-message flash-message--{{ message.type|default('info') }}">
                    {{ message.message|default('Message indéfini') }}
                </div>
            {% endfor %}

            {% block content %}{% endblock %}
        </main>
    </div>
{% endblock %}

{% block scripts %}
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/assets/js/dashboard.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('[data-nav-toggle]').forEach((toggle) => {
                toggle.addEventListener('click', () => {
                    const target = document.querySelector(toggle.dataset.target);
                    if (target) {
                        target.classList.toggle('is-open');
                    }
                });
            });
        });
    </script>
    {% if scripts is defined %}
        {% for script in scripts %}
            <script src="{{ script }}"></script>
        {% endfor %}
    {% endif %}
{% endblock %}
